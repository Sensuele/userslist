(function(){"use strict";var e={3807:function(e,t,s){var r=s(9242),n=s(3396);const o={class:"container"};function a(e,t){const s=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",o,[(0,n.Wm)(s)])}var u=s(89);const i={},l=(0,u.Z)(i,[["render",a]]);var d=l,c=s(2483);const p={class:"wrapper"},f={class:"download-btn"},h=["disabled"];function m(e,t,s,o,a,u){const i=(0,n.up)("Circle"),l=(0,n.up)("user-list"),d=(0,n.up)("BarChart");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",p,[(0,n._)("div",f,[(0,n._)("button",{class:"btn",disabled:e.isLoading,onClick:t[0]||(t[0]=(...t)=>e.getUsers&&e.getUsers(...t))},"Download data",8,h),(0,n.wy)((0,n.Wm)(i,{style:{width:"30px",height:"30px","margin-left":"10px"}},null,512),[[r.F8,e.isLoading]])]),(0,n._)("button",{class:"btn btn-logout",onClick:t[1]||(t[1]=(...t)=>e.logout&&e.logout(...t))},"Logout")]),e.isLoading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(l,{key:0,users:e.sortedUsers},null,8,["users"])),e.users.length>0&&!e.isLoading?((0,n.wg)(),(0,n.j4)(d,{key:1,chartData:u.chartData,chartOptions:a.chartOptions},null,8,["chartData","chartOptions"])):(0,n.kq)("",!0)],64)}const g={key:0,class:"user-list"},v={key:1,class:"empty"};function y(e,t,s,r,o,a){const u=(0,n.up)("user-item");return s.users.length>0?((0,n.wg)(),(0,n.iD)("div",g,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.users,(e=>((0,n.wg)(),(0,n.j4)(u,{user:e,key:e.userId},null,8,["user"])))),128))])):((0,n.wg)(),(0,n.iD)("h2",v," Empty list "))}var w=s(7139);const b={class:"user"},k={class:"user-inner"},I={class:"user-top"},U={style:{color:"green"}},_=(0,n.Uk)(" / "),L={style:{color:"red"}};function O(e,t,s,r,o,a){return(0,n.wg)(),(0,n.iD)("div",b,[(0,n._)("div",k,[(0,n._)("div",I,[(0,n._)("h3",null,"User: "+(0,w.zw)(s.user.userId),1),(0,n._)("div",null,[(0,n._)("span",U,(0,w.zw)(s.user.completed.true),1),_,(0,n._)("span",L,(0,w.zw)(s.user.completed.false),1)])]),(0,n._)("ul",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.user.title,((e,t)=>((0,n.wg)(),(0,n.iD)("li",{key:t},(0,w.zw)(e),1)))),128))])])])}var D={props:{user:{type:Object,required:!0}}};const j=(0,u.Z)(D,[["render",O],["__scopeId","data-v-62ff6268"]]);var C=j,T={components:{UserItem:C},props:{users:{type:Array,required:!0}}};const x=(0,u.Z)(T,[["render",y],["__scopeId","data-v-601ecd21"]]);var S=x;function q(e,t,s,r,o,a){const u=(0,n.up)("Bar");return(0,n.wg)(),(0,n.j4)(u,{"chart-options":s.chartOptions,"chart-data":s.chartData,"chart-id":s.chartId,"dataset-id-key":s.datasetIdKey,plugins:s.plugins,"css-classes":s.cssClasses,styles:s.styles,width:s.width,height:s.height},null,8,["chart-options","chart-data","chart-id","dataset-id-key","plugins","css-classes","styles","width","height"])}var Z=s(6294),A=s(5140);A.kL.register(A.Dx,A.u,A.De,A.ZL,A.uw,A.f$);var B={name:"BarChart",components:{Bar:Z.$Q},props:{chartId:{type:String,default:"bar-chart"},datasetIdKey:{type:String,default:"label"},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{default:"",type:String},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]},chartData:{type:Object,required:!0},chartOptions:{type:Object,default:null}}};const P=(0,u.Z)(B,[["render",q]]);var z=P,E=s(9009),K=s(65),M={components:{UserList:S,Circle:E.Cd,BarChart:z},data(){return{chartOptions:{responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!0},y:{stacked:!1}}}}},computed:{...(0,K.rn)({users:e=>e.user.users,isLoading:e=>e.user.isLoading}),...(0,K.Se)({sortedUsers:"sortedUsers",formedUsersId:"formedUsersId"}),chartData(){return{labels:this.formedUsersId.users,datasets:[{label:"Completed = true",backgroundColor:"blue",data:this.formedUsersId.completed},{label:"Total",backgroundColor:"#f87979",data:this.formedUsersId.total}]}}},methods:{...(0,K.nv)({getUsers:"getUsers",logout:"logout"})}};const H=(0,u.Z)(M,[["render",m]]);var N=H;const Y=(0,n._)("h1",null,"Sign in",-1),F=(0,n._)("label",null,"User name",-1),V=(0,n._)("label",null,"Password",-1),W=(0,n._)("hr",null,null,-1),$=(0,n._)("button",{class:"btn",type:"submit"},"Login",-1);function J(e,t,s,o,a,u){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("form",{class:"login",onSubmit:t[2]||(t[2]=(0,r.iM)(((...t)=>e.fetchToken&&e.fetchToken(...t)),["prevent"]))},[Y,F,(0,n.wy)((0,n._)("input",{required:"","onUpdate:modelValue":t[0]||(t[0]=e=>a.username=e),type:"text",placeholder:"admin"},null,512),[[r.nr,a.username]]),V,(0,n.wy)((0,n._)("input",{required:"","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e),type:"password",placeholder:"Password"},null,512),[[r.nr,a.password]]),W,$],32)])}var Q={name:"login",data(){return{username:"admin",password:"admin"}},methods:{...(0,K.nv)({fetchToken:"fetchToken"})}};const R=(0,u.Z)(Q,[["render",J]]);var G=R;const X={state:()=>({token:localStorage.getItem("user-token")||""}),getters:{isAuthenticated:e=>!!e.token},mutations:{setToken(e,t){e.token=t,window.localStorage.setItem("user-token","fake-token")}},actions:{fetchToken({commit:e},t){e("setToken",JSON.stringify(t)),ie.push("/")},logout({commit:e}){e("setToken",""),window.localStorage.removeItem("user-token"),ie.push("/login")}}};var ee=s(6265),te=s.n(ee);const se={state:()=>({isLoading:!1,users:[]}),getters:{formedList(e){const t=[...e.users].reduce(((e,t)=>(e[t.userId]=e[t.userId]||{userId:t.userId,title:[],completed:{true:0,false:0,total:0}},1==t.completed?e[t.userId].completed.true++:e[t.userId].completed.false++,e[t.userId].completed.total=e[t.userId].completed.true+e[t.userId].completed.false,e[t.userId].title.push(t.title),e)),{}),s=Object.values(t);return s},sortedUsers(e,t){if(t.formedList)return t.formedList.sort(((e,t)=>e.completed.true>t.completed.true?-1:1))},formedUsersId(e,t){if(!t.formedList)return;const s=t.formedList.map((e=>"User "+e.userId)),r=t.formedList.map((e=>e.completed.total)),n=t.formedList.map((e=>e.completed.true));function o(e,t,s){this.users=e,this.total=t,this.completed=s}let a=new o(s,r,n);return a}},mutations:{setUsers(e,t){e.users=t},setLoading(e,t){e.isLoading=t}},actions:{async getUsers({commit:e}){try{e("setLoading",!0);const t=await te().get("https://jsonplaceholder.typicode.com/todos");e("setUsers",t.data)}catch(t){console.log(t)}finally{e("setLoading",!1)}}}};var re=(0,K.MT)({modules:{user:se,auth:X}});const ne=(e,t,s)=>{re.getters.isAuthenticated?s("/"):s()},oe=(e,t,s)=>{re.getters.isAuthenticated?s():s("/login")},ae=[{path:"/",name:"Main",component:N,beforeEnter:oe},{path:"/login",name:"Login",component:G,beforeEnter:ne}],ue=(0,c.p7)({history:(0,c.PO)("/userslist/"),routes:ae});var ie=ue;(0,r.ri)(d).use(re).use(ie).mount("#app")}},t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,r,n,o){if(!r){var a=1/0;for(d=0;d<e.length;d++){r=e[d][0],n=e[d][1],o=e[d][2];for(var u=!0,i=0;i<r.length;i++)(!1&o||a>=o)&&Object.keys(s.O).every((function(e){return s.O[e](r[i])}))?r.splice(i--,1):(u=!1,o<a&&(a=o));if(u){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,n,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,a=r[0],u=r[1],i=r[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(n in u)s.o(u,n)&&(s.m[n]=u[n]);if(i)var d=i(s)}for(t&&t(r);l<a.length;l++)o=a[l],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},r=self["webpackChunkuserslist"]=self["webpackChunkuserslist"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(3807)}));r=s.O(r)})();
//# sourceMappingURL=app.5b7363b0.js.map